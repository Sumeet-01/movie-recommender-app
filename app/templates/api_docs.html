{% extends 'base.html' %}

{% block content %}
<section class="page-hero">
  <div class="page-hero-inner">
    <h1 class="page-hero-title animate-fade-up">ðŸ“¡ API Documentation</h1>
    <p class="page-hero-subtitle animate-fade-up" style="animation-delay:.1s;">CineMate REST API endpoints</p>
  </div>
</section>

<div class="container" style="padding: 40px 5%; max-width: 900px; margin: 0 auto;">
  {% set endpoints = [
    ('GET', '/api/search?q=term', 'Search movies by title', 'Returns matching movies from TMDb.'),
    ('POST', '/api/watchlist/add', 'Add to watchlist', 'Body: { tmdb_id: int }. Requires authentication.'),
    ('POST', '/api/watchlist/remove', 'Remove from watchlist', 'Body: { tmdb_id: int }. Requires authentication.'),
    ('POST', '/api/rate', 'Rate a movie', 'Body: { tmdb_id: int, rating: float }. Requires authentication.'),
    ('POST', '/api/review', 'Submit a review', 'Body: { tmdb_id: int, title: str, content: str }. Requires authentication.'),
    ('GET', '/api/stats', 'User stats', 'Returns ratings count, watchlist count, reviews count. Requires authentication.'),
    ('GET', '/api/recommendations', 'Get AI recommendations', 'Returns personalized movie recommendations. Requires authentication.'),
    ('GET', '/api/health', 'Health check', 'Returns server status and TMDB API connectivity.')
  ] %}

  {% for method, path, title, desc in endpoints %}
  <div class="auth-card animate-fade-up" style="max-width:none; margin-bottom:16px;">
    <div style="display:flex; align-items:center; gap:12px; margin-bottom:8px;">
      <span style="background:{{ '#10b981' if method == 'GET' else '#f59e0b' }}; color:#000; padding:4px 10px; border-radius:4px; font-size:0.75rem; font-weight:700;">{{ method }}</span>
      <code style="color:var(--accent); font-size:0.9rem;">{{ path }}</code>
    </div>
    <h4 style="margin:0 0 4px;">{{ title }}</h4>
    <p style="color:var(--text-muted); margin:0; font-size:0.9rem;">{{ desc }}</p>
  </div>
  {% endfor %}
</div>
{% endblock %}
